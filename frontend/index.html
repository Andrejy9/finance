<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ifrit II</title>

    <!-- Dipendenze CSS -->
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="pages/tickerStyles.css">

    <!-- Dipendenze JavaScript (ordine corretto) -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-crosshair"></script> <!-- Plugin crosshair -->
    <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-financial@1.0.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation"></script>
    
    <!-- Registrazione plugin -->
    <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-financial">
        // Registra i componenti necessari
        Chart.register(
            Chart.Financial.CandlestickController,
            Chart.Financial.CandlestickElement,
            Chart.Financial.FinancialController,
            Chart.Financial.FinancialElement,
            Zoom,
            ChartCrosshairPlugin,
            ChartAnnotation
        );
    </script>
</head>

<body>
    <h2>Ifrit II</h2>
    <a href="pages/tickersManager.html" class="link-button" title="Go to Tickers Manager">
        <i class="fas fa-chart-line"></i> 📈 Tickers Manager
    </a>

    <div class="saved-tickers-container">
        <h3>📌 Saved Tickers</h3>
        <ul id="savedTickersList" class="saved-tickers-list"></ul>
    </div>

    <input type="text" id="tickerInput" placeholder="Inserisci il ticker">
    <ul id="suggestionsList"></ul>
    <button onclick="fetchAndDrawTickerInput()">📊</button>

    <div class="chart-controls">
        <button onclick="resetZoom()" class="control-btn">🔍Reset Zoom</button>
        <button id="calcGrowthButton" class="toggle-button">
            📈 measure
        </button>
         <!-- Selettore per il timeframe -->
    <select id="timeframe">
        <option value="1m">1m</option>
        <option value="5m">5m</option>
        <option value="15m">15m</option>
        <option value="1h">1h</option>
        <option value="1d">1d</option>
        <option value="1wk">1w</option>
        <option value="1mo">1mo</option>
    </select>
    </div>
    <div class="chart-container">

        <canvas id="stockChart"></canvas>
    </div>

    <!-- Scripts applicazione (ordine corretto) -->
    <script src="script.js"></script>
    <script src="./scripts/tickersManager.js"></script>
    <script src="./scripts/graphManager.js"></script>
</body>

</html>